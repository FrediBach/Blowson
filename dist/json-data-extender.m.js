var e=require("lodash"),i=require("txtgen"),t=new(require("chance")),s=require("./helpers"),r=s.randomTime,n=s.randomDate,d=s.randomDatetime,l=s.findGap,a=s.getMaxPrecision,f=s.everythingCapitalized,o=s.minNumber,p=s.maxNumber,y=s.minGapOfIntArray,g=s.randomIntWithStep,m=s.minStrLength,h=s.maxStrLength,u=s.minWordCount,c=s.maxWordCount,v=s.minSentenceCount,C=s.maxSentenceCount,M=s.minParagraphCount,w=s.maxParagraphCount,x=s.minDate,S=s.maxDate,D=s.convertStringDateArray,q=s.capitalize,b=s.isDateString,E=s.isDatetimeString,I=s.isTimeString,z=s.getWeights;module.exports=function(s){var L,N=[];for(L in s){var k={key:L,minID:1,maxID:1,totalCount:0,fields:{}},U=void 0,W=void 0;for(U in s[L])for(W in s[L][U]){var O=s[L][U][W],P="undefined";"boolean"==typeof O?P="boolean":"number"==typeof O?P=Math.round(O)===O?"int":"float":"string"==typeof O?P=b(O)?"date":E(O)?"datetime":I(O)?"time":1===O.length?"char":"string":"object"==typeof O&&(P="JSON"),void 0===k.fields[W]?k.fields[W]={types:[P],entries:[O],allEntries:[O],cnt:1}:(k.fields[W].types.push(P),k.fields[W].types=e.uniq(k.fields[W].types),k.fields[W].entries.push(O),k.fields[W].entries=e.uniq(k.fields[W].entries),k.fields[W].allEntries.push(O),k.fields[W].cnt++)}for(W in k.fields)"id"===W&&(k.totalCount=k.fields[W].cnt),1===k.fields[W].types.length&&(k.fields[W].type=k.fields[W].types[0]),k.fields[W].entries.length<k.fields[W].cnt?(k.fields[W].repeatEntries=!0,k.fields[W].weights=z(k.fields[W].allEntries,k.fields[W].entries)):k.fields[W].repeatEntries=!1,k.fields[W].required=!(k.fields[W].cnt<k.totalCount);k.gap=l(k.fields.id.entries),N.push(k)}for(L in N){var A=N[L];if(A.gap){var G=void 0,J=void 0;for(G=A.gap.start;G<=A.gap.end;G++){var T={};for(J in A.fields){var j="";if(A.fields[J].repeatEntries&&(j=t.weighted(A.fields[J].entries,A.fields[J].weights)),"id"===J&&(j=G),"age"===J&&"int"===A.fields[J].type&&(j=t.age()),"firstname"===J&&"string"===A.fields[J].type&&(j=t.first()),"lastname"===J&&"string"===A.fields[J].type&&(j=t.last()),"company"===J&&"string"===A.fields[J].type&&(j=t.company()),"country"===J&&"string"===A.fields[J].type&&(j=t.country()),"email"===J&&"string"===A.fields[J].type&&(j=t.email()),"color"===J&&"string"===A.fields[J].type&&(j=t.color()),"ip"===J&&"string"===A.fields[J].type&&(j=t.ip()),"profession"===J&&"string"===A.fields[J].type&&(j=t.profession()),"url"===J&&"string"===A.fields[J].type&&(j=t.url()),"city"===J&&"string"===A.fields[J].type&&(j=t.city()),"street"===J&&"string"===A.fields[J].type&&(j=t.street()),"zip"===J&&"int"===A.fields[J].type&&(j=parseInt(t.zip())),"weekday"===J&&"string"===A.fields[J].type&&(j=t.weekday()),"year"===J&&"int"===A.fields[J].type&&(j=parseInt(t.year())),"password"===J&&"string"===A.fields[J].type&&(j=t.hash()),"guid"===J&&"string"===A.fields[J].type&&(j=t.guid()),""===j&&"JSON"===A.fields[J].type&&(j={}),""===j&&"string"===A.fields[J].type){var F=m(A.fields[J].entries),B=h(A.fields[J].entries),H=u(A.fields[J].entries),K=c(A.fields[J].entries),Q=v(A.fields[J].entries),R=C(A.fields[J].entries),V=M(A.fields[J].entries),X=w(A.fields[J].entries);j=X>1?i.article(Math.floor(Math.random()*X)+V):R>1?i.paragraph(Math.floor(Math.random()*R)+Q):K>1?t.sentence({words:Math.floor(Math.random()*K)+H}).slice(0,-1):A.fields[J].entries[0][0].toUpperCase()===A.fields[J].entries[0][0]?t.capitalize(t.word({length:Math.floor(Math.random()*F)+B})):t.string({length:Math.floor(Math.random()*F)+B}),A.fields[J].entries[0]===A.fields[J].entries[0].toUpperCase()?j=j.toUpperCase():A.fields[J].entries[0]===A.fields[J].entries[0].toLowerCase()?j=j.toLowerCase():f(A.fields[J].entries)&&(j=q(j))}if(""===j&&"int"===A.fields[J].type){var Y=o(A.fields[J].entries),Z=p(A.fields[J].entries),$=y(A.fields[J].entries);j=g(Y,Z,$)}if(""===j&&"float"===A.fields[J].type){var _=o(A.fields[J].entries),ee=p(A.fields[J].entries),ie=a(A.fields[J].entries);j=Number((Math.random()*ee+_).toFixed(ie))}if(""===j&&"char"===A.fields[J].type&&(j=A.fields[J].entries[0]===A.fields[J].entries[0].toUpperCase()?t.letter({casing:"upper"}):A.fields[J].entries[0]===A.fields[J].entries[0].toLowerCase()?t.letter({casing:"lower"}):t.letter()),""===j&&"date"===A.fields[J].type){var te=x(D(A.fields[J].entries)),se=S(D(A.fields[J].entries));j=n(te,se)}if(""===j&&"datetime"===A.fields[J].type){var re=x(D(A.fields[J].entries)),ne=S(D(A.fields[J].entries));j=d(re,ne)}""===j&&"time"===A.fields[J].type&&(j=r()),(A.fields[J].required||Math.random()>=.5)&&(T[J]=j)}s[A.key].push(T)}}}return s};
//# sourceMappingURL=json-data-extender.m.js.map
