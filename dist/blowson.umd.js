!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("lodash"),require("chance"),require("slugify"),require("md5"),require("date-fns"),require("numeral"),require("marked"),require("prob.js"),require("pluralize"),require("voca"),require("randexp"),require("faker"),require("json-stringify-pretty-compact")):"function"==typeof define&&define.amd?define(["lodash","chance","slugify","md5","date-fns","numeral","marked","prob.js","pluralize","voca","randexp","faker","json-stringify-pretty-compact"],t):t(e.lodash,e.chance,e.slugify,e.md5,e.dateFns,e.numeral,e.marked,e.Prob,e.pluralize,e.voca,e.randexp,e.faker,e.stringify)}(this,function(e,t,n,i,r,a,s,l,o,u,f,d,p){e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i,a=a&&a.hasOwnProperty("default")?a.default:a,s=s&&s.hasOwnProperty("default")?s.default:s,l=l&&l.hasOwnProperty("default")?l.default:l,o=o&&o.hasOwnProperty("default")?o.default:o,u=u&&u.hasOwnProperty("default")?u.default:u,f=f&&f.hasOwnProperty("default")?f.default:f,d=d&&d.hasOwnProperty("default")?d.default:d,p=p&&p.hasOwnProperty("default")?p.default:p;var h=function(e,t){var n=e,i=t-e+1;return Math.floor(Math.random()*i)+n},c=function(e){for(var t;!t;)t=e[h(0,e.length-1)];return t},g=function(e){var t="a";return e.match(/^(a|e|i|o)/)&&(t="an"),t+" "+e},m=["alligator","ant","bear","bee","bird","camel","cat","cheetah","chicken","chimpanzee","cow","crocodile","deer","dog","dolphin","duck","eagle","elephant","fish","fly","fox","frog","giraffe","goat","goldfish","hamster","hippopotamus","horse","kangaroo","kitten","lion","lobster","monkey","octopus","owl","panda","pig","puppy","rabbit","rat","scorpion","seal","shark","sheep","snail","snake","spider","squirrel","tiger","turtle","wolf","zebra","apple","apricot","banana","blackberry","blueberry","cherry","cranberry","currant","fig","grape","grapefruit","grapes","kiwi","kumquat","lemon","lime","melon","nectarine","orange","peach","pear","persimmon","pineapple","plum","pomegranate","prune","raspberry","strawberry","tangerine","watermelon"],y=["adaptable","adventurous","affable","affectionate","agreeable","alert","alluring","ambitious","ambitious","amiable","amicable","amused","amusing","boundless","brave","brave","bright","bright","broad-minded","calm","calm","capable","careful","charming","charming","cheerful","coherent","comfortable","communicative","compassionate","confident","conscientious","considerate","convivial","cooperative","courageous","courageous","courteous","creative","credible","cultured","dashing","dazzling","debonair","decisive","decisive","decorous","delightful","detailed","determined","determined","diligent","diligent","diplomatic","discreet","discreet","dynamic","dynamic","eager","easygoing","efficient","elated","eminent","emotional","enchanting","encouraging","endurable","energetic","energetic","entertaining","enthusiastic","enthusiastic","excellent","excited","exclusive","exuberant","exuberant","fabulous","fair","fair-minded","faithful","faithful","fantastic","fearless","fearless","fine","forceful","frank","frank","friendly","friendly","funny","funny","generous","generous","gentle","gentle","glorious","good","good","gregarious","happy","hard-working","harmonious","helpful","helpful","hilarious","honest","honorable","humorous","imaginative","impartial","impartial","independent","industrious","instinctive","intellectual","intelligent","intuitive","inventive","jolly","joyous","kind","kind","kind-hearted","knowledgeable","level","likeable","lively","lovely","loving","loving","loyal","lucky","mature","modern","modest","neat","nice","nice","obedient","optimistic","painstaking","passionate","patient","peaceful","perfect","persistent","philosophical","pioneering","placid","placid","plausible","pleasant","plucky","plucky","polite","powerful","practical","pro-active","productive","protective","proud","punctual","quick-witted","quiet","quiet","rational","receptive","reflective","reliable","relieved","reserved","resolute","resourceful","responsible","rhetorical","righteous","romantic","romantic","sedate","seemly","selective","self-assured","self-confident","self-disciplined","sensible","sensitive","sensitive","shrewd","shy","silly","sincere","sincere","skillful","smiling","sociable","splendid","steadfast","stimulating","straightforward","successful","succinct","sympathetic","talented","thoughtful","thoughtful","thrifty","tidy","tough","tough","trustworthy","unassuming","unbiased","understanding","unusual","upbeat","versatile","vigorous","vivacious","warm","warmhearted","willing","willing","wise","witty","witty","wonderful"],v=["a","e","i","o","u","y"],w=["the {{noun}} is {{a_noun}}","{{a_noun}} is {{an_adjective}} {{noun}}","the first {{adjective}} {{noun}} is, in its own way, {{a_noun}}","their {{noun}} was, in this moment, {{an_adjective}} {{noun}}","{{a_noun}} is {{a_noun}} from the right perspective","the literature would have us believe that {{an_adjective}} {{noun}} is not but {{a_noun}}","{{an_adjective}} {{noun}} is {{a_noun}} of the mind","the {{adjective}} {{noun}} reveals itself as {{an_adjective}} {{noun}} to those who look","authors often misinterpret the {{noun}} as {{an_adjective}} {{noun}}, when in actuality it feels more like {{an_adjective}} {{noun}}","we can assume that any instance of {{a_noun}} can be construed as {{an_adjective}} {{noun}}","they were lost without the {{adjective}} {{noun}} that composed their {{noun}}","the {{adjective}} {{noun}} comes from {{an_adjective}} {{noun}}","{{a_noun}} can hardly be considered {{an_adjective}} {{noun}} without also being {{a_noun}}","few can name {{an_adjective}} {{noun}} that isn't {{an_adjective}} {{noun}}","some posit the {{adjective}} {{noun}} to be less than {{adjective}}","{{a_noun}} of the {{noun}} is assumed to be {{an_adjective}} {{noun}}","{{a_noun}} sees {{a_noun}} as {{an_adjective}} {{noun}}","the {{noun}} of {{a_noun}} becomes {{an_adjective}} {{noun}}","{{a_noun}} is {{a_noun}}'s {{noun}}","{{a_noun}} is the {{noun}} of {{a_noun}}","{{an_adjective}} {{noun}}'s {{noun}} comes with it the thought that the {{adjective}} {{noun}} is {{a_noun}}","{{nouns}} are {{adjective}} {{nouns}}","{{adjective}} {{nouns}} show us how {{nouns}} can be {{nouns}}","before {{nouns}}, {{nouns}} were only {{nouns}}","those {{nouns}} are nothing more than {{nouns}}","some {{adjective}} {{nouns}} are thought of simply as {{nouns}}","one cannot separate {{nouns}} from {{adjective}} {{nouns}}","the {{nouns}} could be said to resemble {{adjective}} {{nouns}}","{{an_adjective}} {{noun}} without {{nouns}} is truly a {{noun}} of {{adjective}} {{nouns}}"],b=["to be more specific, ","in recent years, ","however, ","by the way","of course, ","some assert that ","if this was somewhat unclear, ","unfortunately, that is wrong; on the contrary, ","it's very tricky, if not impossible, ","this could be, or perhaps ","this is not to discredit the idea that ","we know that ","it's an undeniable fact, really; ","framed in a different way, ","what we don't know for sure is whether or not ","as far as we can estimate, ","as far as he is concerned, ","the zeitgeist contends that ","though we assume the latter, ","far from the truth, ","extending this logic, ","nowhere is it disputed that ","in modern times ","in ancient times ","recent controversy aside, ","washing and polishing the car,","having been a gymnast, ","after a long day at school and work, ","waking to the buzz of the alarm clock, ","draped neatly on a hanger, ","shouting with happiness, "],M=["noun","a_noun","nouns","adjective","an_adjective"],j={noun:function(){return c(m)},a_noun:function(){return g(c(m))},nouns:function(){return(e=c(m)).endsWith("s")?e:(e.match(/(ss|ish|ch|x|us)$/)?e+="e":e.endsWith("y")&&!v.includes(e.charAt(e.length-2))&&(e=e.slice(0,e.length-1),e+="ie"),e+"s");var e},adjective:function(){return c(y)},an_adjective:function(){return g(c(y))}},k=function(){return function(e){var t=e,n=e.match(/\{\{(.+?)\}\}/g);if(n&&n.length)for(var i=0;i<n.length;i++){var r=n[i].replace("{{","").replace("}}","").replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").replace(/\r?\n|\r/g," ").replace(/\s\s+|\r/g," "),a=void 0;M.includes(r)&&(a=j[r]()),t=t.replace(n[i],a)}return t}(c(w))},_=function(){var e,t=(Math.random()<.33?c(b):"")+k();if(t=t.charAt(0).toUpperCase()+t.slice(1),t+=(e=".......!?!?;...".split(""),c(e)),Math.random()>=.9){t=c(["He said","She said","In his own words","In her own words","Yelling","Wispering","Quoting with intend"])+': "'+t+'"'}return t},x=function(e){void 0===e&&(e=0),e||(e=h(3,10));for(var t=Math.min(e,15),n=[];n.length<t;){var i=_();n.push(i)}return n.join(" ")},O=function(e){void 0===e&&(e=0),e||(e=h(3,10));for(var t=Math.min(e,15),n=[];n.length<t;){var i=x();n.push(i)}return n.join("\n\n")},W=new t;function T(e,t){var n=new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime())),i=""+(n.getMonth()+1),r=""+n.getDate(),a=n.getFullYear(),s=""+n.getHours(),l=""+n.getMinutes(),o=""+n.getSeconds();return i.length<2&&(i="0"+i),r.length<2&&(r="0"+r),s.length<2&&(s="0"+s),l.length<2&&(l="0"+l),o.length<2&&(o="0"+o),[a,i,r].join("-")+"T"+[s,l,o].join(":")+"+01:00"}function N(e){var t,n=Math.min.apply(Math,e),i=Math.max.apply(Math,e),r=[];for(t=n;t<=i;t++)-1==e.indexOf(t)&&r.push(t);return r.length>0&&{start:Math.min.apply(Math,r),end:Math.max.apply(Math,r)}}function D(e){if(!isFinite(e))return 0;for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}function q(e){for(var t=0,n=0,i=e;n<i.length;n+=1){var r=D(i[n]);r>t&&(t=r)}return t}function F(e){for(var t,n=!0,i=0,r=e;i<r.length;i+=1)if(Q(t=r[i])!==t){n=!1;break}return n}function z(e){return Math.min.apply(Math,e)}function C(e){return Math.max.apply(Math,e)}function P(e){for(var t,n,i=999999999,r=0,a=e;r<a.length;r+=1){t=a[r];for(var s=0,l=e;s<l.length;s+=1)t!==(n=l[s])&&Math.abs(t-n)<i&&(i=Math.abs(t-n))}return i}function E(e,t,n){var i,r;return arguments.length<2&&(t=e,e=0),n||(n=1),i=(t-e)/n,r=Math.random(),r*=i,r=Math.floor(r),r*=n,r+=e}function A(e,t){var n=Math.abs((l.normal(0,1)()+3)/6),i=Math.floor(n*(t-e)+e);return i<e&&(i=e),i>t&&(i=t),i}function S(e){return Math.max.apply(Math,e.map(function(e){return e.length}))}function U(t){return Math.min.apply(Math,t.map(function(t){return e.compact(t.replace(/[^\sA-Za-z]/g,"").split(" ")).length}))}function $(t){return Math.max.apply(Math,t.map(function(t){return e.compact(t.replace(/[^\sA-Za-z]/g,"").split(" ")).length}))}function I(t){return Math.min.apply(Math,t.map(function(t){return e.compact(t.split(/[\.\!\?]+/)).length}))}function L(t){return Math.max.apply(Math,t.map(function(t){return e.compact(t.split(/[\.\!\?]+/)).length}))}function J(t){return Math.min.apply(Math,t.map(function(t){return e.compact(t.replace(/\n$/gm,"").split(/\n/)).length}))}function B(t){return Math.max.apply(Math,t.map(function(t){return e.compact(t.replace(/\n$/gm,"").split(/\n/)).length}))}function Y(e){return new Date(Math.min.apply(null,e))}function H(e){return new Date(Math.max.apply(null,e))}function Z(e){for(var t=[],n=0,i=e;n<i.length;n+=1)t.push(new Date(i[n]));return t}function Q(e){return e.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})}function G(e,t){for(var n,i={},r=[],a=0,s=e;a<s.length;a+=1)void 0===i[n=s[a]]?i[n]=1:i[n]++;for(var l=0,o=t;l<o.length;l+=1)r.push(i[n=o[l]]);return r}function K(e){for(var t,n=null,i=null,r=!1,a=0,s=e;a<s.length;a+=1){if(t=s[a],null!==i&&t>i){if("desc"===n){r=!0;break}n="asc"}if(null!==i&&t<i){if("asc"===n){r=!0;break}n="desc"}i=t}return!r&&null!==n&&n}function R(e){for(var t=null,n=null,i=!1,r=0,a=e;r<a.length;r+=1){var s=new Date(a[r]);if(null!==n&&s>n){if("desc"===t){i=!0;break}t="asc"}if(null!==n&&s<n){if("asc"===t){i=!0;break}t="desc"}n=s}return!i&&null!==t&&t}function V(t,l){if(t.constructor!==Array){t=String(t);var u=Number(t);if("slug"===l)return n(t,{lower:!0});if("lower"===l)return t.toLowerCase();if("upper"===l)return t.toUpperCase();if("md5"===l)return i(t);if("capitalize"===l)return Q(t);if("plural"===l)return o.plural(t);if("singular"===l)return o.singular(t);if("trim"===l)return e.trim(t);if("md"===l)return s(t);if(NaN!==u&&"round"===l)return Math.round(t);if(NaN!==u&&"floor"===l)return Math.floor(t);if(NaN!==u&&"ceil"===l)return Math.ceil(t);if(NaN!==u&&"plus:"===l.substring(0,5)){var f=l.split(":");return u+Number(f[1])}if(NaN!==u&&"minus:"===l.substring(0,6)){var d=l.split(":");return u-Number(d[1])}if(NaN!==u&&"times:"===l.substring(0,6)){var p=l.split(":");return u*Number(p[1])}if(NaN!==u&&"max:"===l.substring(0,4)){var h=l.split(":"),c=Number(h[1]);return u>c?c:u}if(NaN!==u&&"min:"===l.substring(0,4)){var g=l.split(":"),m=Number(g[1]);return u<m?m:u}if(NaN!==u&&"num:"===l.substring(0,4)){var y=l.split(":");return a(u).format(y[1])}if("optional"===l&&Math.random()>=.5)return"";if("date:"===l.substring(0,5)){var v=l.split(":");return r.format(new Date(t),v[1])}return t}return"count"===l?t.length:"max"===l?C(t):"min"===l?z(t):"sum"===l?e.sum(t):"avg"===l?e.mean(t):"rand"===l?e.sample(t):t}function X(e,t){for(var n=V(e,t[1]),i=2;t.length>i;)n=V(n,t[i]),i++;return n}function ee(e,t,n,i){var r=e[0];if(void 0!==i[r]){for(var a,s=[],l=0,o=i[r];l<o.length;l+=1)(a=o[l])[t+"_id"]===n&&s.push(e.length>1?a[e[1]]:a.id);return s}return[]}function te(e,t,n){var i=!1,r=t.slice(0),a=e;if(0===t.length)return null;for(;!i;){var s=r.shift();if(void 0===a[s+"_id"])return void 0!==a[s]?void 0!==a[s][t[t.length-1]]?a[s][t[t.length-1]]:"object"!=typeof a[s]?a[s]:null:null;var l=void 0,u=o.plural(s);if(void 0!==n[u])for(l in n[u])n[u][l].id===a[s+"_id"]&&(a=n[u][l]);0===r.length&&(i=!0)}return null}function ne(e){var t="undefined",n=!1;return"boolean"==typeof e?t="boolean":"number"==typeof e?t=Math.round(e)===e?"int":"float":"string"==typeof e?/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(e)?t="date":!function(e){return/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}\+[0-9]{2}:[0-9]{2}$/.test(e)}(e)?!function(e){return/^[0-9]{2}:[0-9]{2}:[0-9]{2}$|^[0-9]{2}:[0-9]{2}$/.test(e)}(e)?1===e.length?t="char":(/{{\s*([\w\.\?\|\:\, ]+)\s*}}/.test(e)&&(n=!0),t="string"):t="time":t="datetime":"object"==typeof e&&(t=Array.isArray(e)?"array":"JSON"),{fieldType:t,containsTemplate:n}}function ie(e,t,n){return t==n?e:(e.hasOwnProperty(t)&&(e[n]=e[t],delete e[t]),e)}function re(e,t,n,i){for(var r=[],a=0,s=i;a<s.length;a+=1)if(prevField=s[a],"int"!==n&&"float"!==n||"int"!==prevField.type&&"float"!==prevField.type){if("date"===n&&"date"===prevField.type||"datetime"===n&&"datetime"===prevField.type){var l=new Date(t),o=new Date(prevField.value);r.push(l>o?e+">"+prevField.key:l<o?e+"<"+prevField.key:e+"="+prevField.key)}}else t>prevField.value?r.push(e+">"+prevField.key):t<prevField.value?r.push(e+"<"+prevField.key):r.push(e+"="+prevField.key);return r}function ae(e){for(var t,n=[],i=0,r=e;i<r.length;i+=1){var a=(t=r[i]).split(/>|<|=/);t.indexOf("<")>-1&&-1===e.indexOf(a[0]+">"+a[1])&&-1===e.indexOf(a[0]+"="+a[1])&&n.push(t),t.indexOf(">")>-1&&-1===e.indexOf(a[0]+"<"+a[1])&&-1===e.indexOf(a[0]+"="+a[1])&&n.push(t),t.indexOf("=")>-1&&-1===e.indexOf(a[0]+">"+a[1])&&-1===e.indexOf(a[0]+"<"+a[1])&&n.push(t)}return n}function se(e,t,n,i){if(0===t.length)return!0;if(""===e)return!1;for(var r,a=0,s=t;a<s.length;a+=1){var l=(r=s[a]).split(/>|<|=/);if(void 0!==n[l[1]]&&""!==n[l[1]])if("int"===i||"float"===i){if(r.indexOf("<")>-1&&e>=n[l[1]])return!1;if(r.indexOf(">")>-1&&e<=n[l[1]])return!1;if(r.indexOf("=")>-1&&e!==n[l[1]])return!1}else if("date"===i||"datetime"===i){var o=new Date(e),u=new Date(n[l[1]]);if(r.indexOf("<")>-1&&o>=u)return!1;if(r.indexOf(">")>-1&&o<=u)return!1;if(r.indexOf("=")>-1&&o!==u)return!1}}return!0}function le(e,t,n){var i;for(i in t)if(e.indexOf(n+"="+i)>-1)return t[i];return null}function oe(e){for(var t,n=null,i="",r=0,a=e;r<a.length;r+=1){var s="";if((t=a[r]).length<2)return!1;if(null===n)n=t.length;else if(t.length!==n)return!1;for(var l=0,o=t;l<o.length;l+=1)char=o[l],u.isAlpha(char)?u.isLowerCase(char)?s+="a":s+="A":u.isDigit(char)?s+="D":u.isBlank(char)?s+="B":s+=char;if(""===i)i=s;else if(i!==s)return!1}return i}function ue(t){for(var n="",i=0,r=t;i<r.length;i+=1)char=r[i],"A"===char?n+=e.sample("ABCDEFGHIJKLMNOPQRSTUVWXYZ"):"a"===char?n+=e.sample("abcdefghijklmnopqrstuvwxyz"):"D"===char?n+=Math.floor(10*Math.random()):"B"===char?n+=" ":n+=char;return n}function fe(t){for(type in t)for(row in t[type]){var n=function(){var n,i=t[type][row][field],r=t[type][row].id;"string"==typeof i&&(t[type][row][field]=i.replace(/{{\s*([^\}]+)\s*}}/g,function(n,i){var a=e.sample(i.split("||")),s=a.split("?"),l=s[0].split("|"),u=l[0].split(".");if("/"===a[0]&&a.endsWith("/"))return f.randexp(a.slice(1,-1).replace(/âµ/g,"}"));if("number"===u[0]&&1===u.length)return Math.floor(10*Math.random());if("sentence"===u[0]&&1===u.length)return _();if("paragraph"===u[0]&&1===u.length)return x();if("word"===u[0]&&2===u.length){if(void 0!==j[u[1]])return l.length>1?X(j[u[1]](),l):j[u[1]]()}else if("fake"===u[0]&&2===u.length){if("function"==typeof W[u[1]])return l.length>1?X(W[u[1]](),l):W[u[1]]()}else if("fake"===u[0]&&3===u.length){if("function"==typeof d[u[1]][u[2]])return l.length>1?X(d[u[1]][u[2]](),l):d[u[1]][u[2]]()}else{if("field"===u[0]&&2===u.length&&void 0!==t[type][row][u[1]])return l.length>1?X(t[type][row][u[1]],l):t[type][row][u[1]];if("field"===u[0]&&u.length>2){var p=u.slice(1),h=te(t[type][row],p,t);if(null!==h)return l.length>1?X(h,l):h;if(s.length>1)return s[1]}else{if("connected"===u[0]&&u.length>1){var c=ee(u.slice(1),o.singular(type),r,t);return l.length>1?X(c,l):c.length>1?[c.slice(0,-1).join(", "),c.slice(-1)[0]].join(c.length<2?"":" and "):c.join(",")}if(s.length>1)return s[1]}}return n}),t[type][row][field]=e.trim(t[type][row][field].replace(/  +/g," ")),n=t[type][row][field],!isNaN(parseFloat(n))&&isFinite(n)&&(t[type][row][field]=Number(t[type][row][field])))};for(field in t[type][row])n()}}var de,pe=new t;de=w.concat(["congratulations to the {{noun}} that won the {{adjective}} {{noun}} with {{a_noun}}","incomprehensibilities of a {{adjective}} {{noun}} and {{a_noun}} made {{a_noun}} {{adjective}}"]),w=function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(de),module.exports=function(t){var n,i,r,a,s,l,o,u,f,h,c,g,m=!1,y={},v=[],w={},b=[];for(n in"string"==typeof y?(y=JSON.parse(t),m=!0):y=t,y)for(r in y[n])for(i in y[n][r]){var M=i.split("__");"__"!==i.substr(0,2)?M.length>1&&(w[n+"."+M[1]]=n+"."+M[0],ie(y[n][r],i,M[1])):(b.push(n+"."+i.substr(2)),ie(y[n][r],i,i.substr(2)))}for(n in y){var j={key:n,minID:1,maxID:1,totalCount:0,fields:{}};for(r in y[n]){var k=[];for(i in y[n][r]){var D=y[n][r][i],V=ne(D),X=V.fieldType,ee=V.containsTemplate;if(void 0===j.fields[i]?j.fields[i]={types:[X],entries:[D],allEntries:[D],containsTemplate:ee,rules:[],cnt:1}:(j.fields[i].types.push(X),j.fields[i].types=e.uniq(j.fields[i].types),j.fields[i].entries.push(D),j.fields[i].entries=e.uniq(j.fields[i].entries),j.fields[i].allEntries.push(D),j.fields[i].cnt++,ee&&(j.fields[i].containsTemplate=!0)),"JSON"===X){var te=void 0;for(te in D){var de=D[te],he=ne(de),ce=he.fieldType,ge=he.containsTemplate;void 0===j.fields[i+"."+te]?j.fields[i+"."+te]={types:[ce],entries:[de],allEntries:[de],containsTemplate:ge,cnt:1}:(j.fields[i+"."+te].types.push(ce),j.fields[i+"."+te].types=e.uniq(j.fields[i+"."+te].types),j.fields[i+"."+te].entries.push(de),j.fields[i+"."+te].entries=e.uniq(j.fields[i+"."+te].entries),j.fields[i+"."+te].allEntries.push(de),j.fields[i+"."+te].cnt++,ge&&(j.fields[i+"."+te].objContainsTemplate=!0))}}if(k.length>0&&"id"!==i&&!i.endsWith("_id")&&!i.endsWith("_ids")){var me=re(i,D,X,k);me.length>0&&(j.fields[i].rules=j.fields[i].rules.concat(me))}"id"===i||i.endsWith("_id")||i.endsWith("_ids")||k.push({key:i,value:D,type:X})}}for(i in j.fields)"id"===i&&(j.totalCount=j.fields[i].cnt);for(i in j.fields)j.fields[i].type=1===j.fields[i].types.length?j.fields[i].types[0]:2==j.fields[i].types.length&&j.fields[i].types.indexOf("int")>-1&&j.fields[i].types.indexOf("float")>-1?"float":"string",j.fields[i].pattern="string"===j.fields[i].type&&!j.fields[i].containsTemplate&&oe(j.fields[i].entries),j.fields[i].entries.length<j.fields[i].cnt||j.fields[i].containsTemplate?(j.fields[i].repeatEntries=!0,j.fields[i].weights=G(j.fields[i].allEntries,j.fields[i].entries)):j.fields[i].repeatEntries=!1,j.fields[i].required=!(j.fields[i].cnt<j.totalCount),j.fields[i].rules=ae(e.uniq(j.fields[i].rules)),j.fields[i].dir=!1,"int"!==j.fields[i].type&&"float"!==j.fields[i].type||(j.fields[i].dir=K(j.fields[i].entries)),"date"!==j.fields[i].type&&"datetime"!==j.fields[i].type||(j.fields[i].dir=R(j.fields[i].entries));j.gap=N(j.fields.id.entries),v.push(j)}for(n in v){var ye=v[n];if(ye.gap){var ve=void 0,we=void 0;for(ve=ye.gap.start;ve<=ye.gap.end;ve++){var be={};for(we in ye.fields){var Me="";if(ye.fields[we].repeatEntries||ye.fields[we].containsTemplate)Me=pe.weighted(ye.fields[we].entries,ye.fields[we].weights);else{if("id"===we&&(Me=ve),"age"!==we&&!we.endsWith(".age")||"int"!==ye.fields[we].type||(Me=pe.age()),"firstname"!==we&&!we.endsWith(".firstname")||"string"!==ye.fields[we].type||(Me=pe.first()),"lastname"!==we&&!we.endsWith(".lastname")||"string"!==ye.fields[we].type||(Me=pe.last()),"company"!==we&&!we.endsWith(".company")||"string"!==ye.fields[we].type||(Me=pe.company()),"country"!==we&&!we.endsWith(".country")||"string"!==ye.fields[we].type||(Me=pe.country()),"email"!==we&&!we.endsWith(".email")||"string"!==ye.fields[we].type||(Me=d.internet.exampleEmail()),"color"!==we&&!we.endsWith(".color")||"string"!==ye.fields[we].type||(Me=pe.color()),"ip"!==we&&!we.endsWith(".ip")||"string"!==ye.fields[we].type||(Me=pe.ip()),"profession"!==we&&!we.endsWith(".profession")||"string"!==ye.fields[we].type||(Me=pe.profession()),"url"!==we&&!we.endsWith(".url")||"string"!==ye.fields[we].type||(Me=pe.url()),"city"!==we&&!we.endsWith(".city")||"string"!==ye.fields[we].type||(Me=pe.city()),"street"!==we&&!we.endsWith(".street")||"string"!==ye.fields[we].type||(Me=pe.street()),"zip"!==we&&!we.endsWith(".zip")||"int"!==ye.fields[we].type||(Me=parseInt(pe.zip())),"weekday"!==we&&!we.endsWith(".weekday")||"string"!==ye.fields[we].type||(Me=pe.weekday()),"year"!==we&&!we.endsWith(".year")||"int"!==ye.fields[we].type||(Me=parseInt(pe.year())),"password"!==we&&!we.endsWith(".password")||"string"!==ye.fields[we].type||(Me=pe.hash()),"guid"!==we&&!we.endsWith(".guid")||"string"!==ye.fields[we].type||(Me=pe.guid()),"product"!==we&&!we.endsWith(".product")||"string"!==ye.fields[we].type||(Me=d.commerce.productName()),"material"!==we&&!we.endsWith(".material")||"string"!==ye.fields[we].type||(Me=d.commerce.productMaterial()),"iban"!==we&&!we.endsWith(".iban")||"string"!==ye.fields[we].type||(Me=d.finance.iban()),"bic"!==we&&!we.endsWith(".bic")||"string"!==ye.fields[we].type||(Me=d.finance.bic()),"avatar"!==we&&!we.endsWith(".avatar")||"string"!==ye.fields[we].type||(Me=d.image.avatar()),"username"!==we&&!we.endsWith(".username")||"string"!==ye.fields[we].type||(Me=d.internet.userName()),"homepage"!==we&&!we.endsWith(".homepage")||"string"!==ye.fields[we].type||(Me=d.internet.url()),"job"!==we&&!we.endsWith(".job")||"string"!==ye.fields[we].type||(Me=d.name.jobTitle()),"mimetype"!==we&&!we.endsWith(".mimetype")||"string"!==ye.fields[we].type||(Me=d.system.mimeType()),""===Me&&"JSON"===ye.fields[we].type&&(Me={}),""===Me&&"array"===ye.fields[we].type){for(var je=null,ke=null,_e=0,xe=0,Oe=ye.fields[we].entries;xe<Oe.length;xe+=1){arrEntry=Oe[xe];var We=z(arrEntry),Te=C(arrEntry),Ne=arrEntry.length;Ne>0&&(null===je||We<je)&&(je=We),Ne>0&&(null===ke||Te>ke)&&(ke=Te),Ne>_e&&(_e=Ne)}(Me=Array.from({length:Math.floor(Math.random()*_e)+1},function(){return E(je,ke,1)})).sort(function(e,t){return e-t})}if(""===Me&&"string"===ye.fields[we].type){var De=Math.min.apply(Math,ye.fields[we].entries.map(function(e){return e.length})),qe=S(ye.fields[we].entries),Fe=(U(ye.fields[we].entries),$(ye.fields[we].entries)),ze=I(ye.fields[we].entries),Ce=L(ye.fields[we].entries),Pe=J(ye.fields[we].entries),Ee=B(ye.fields[we].entries);Ee>1?Me=O(Math.floor(Math.random()*Ee)+Pe):Ce>1?Me=x(Math.floor(Math.random()*Ce)+ze):Fe>1?(Me=_(),ye.fields[we].entries[0].endsWith(".")||ye.fields[we].entries[0].endsWith("!")||ye.fields[we].entries[0].endsWith("?")||(Me=Me.slice(0,-1))):Me=ye.fields[we].pattern?ue(ye.fields[we].pattern):ye.fields[we].entries[0][0].toUpperCase()===ye.fields[we].entries[0][0]?pe.capitalize(pe.word({length:Math.floor(Math.random()*De)+qe})):pe.string({length:Math.floor(Math.random()*De)+qe}),ye.fields[we].entries[0]===ye.fields[we].entries[0].toUpperCase()?Me=Me.toUpperCase():ye.fields[we].entries[0]===ye.fields[we].entries[0].toLowerCase()?Me=Me.toLowerCase():F(ye.fields[we].entries)&&(Me=Q(Me))}if(""===Me&&"int"===ye.fields[we].type){var Ae=z(ye.fields[we].entries),Se=C(ye.fields[we].entries),Ue=P(ye.fields[we].entries),$e=0,Ie=le(ye.fields[we].rules,be,we),Le=(Se-Ae)/(ye.gap.end-ye.gap.start+1);if("asc"===ye.fields[we].dir?(Se=Math.ceil(Ae+(ve-ye.gap.start+1)*Le-1),Ae=Math.floor(Ae+(ve-ye.gap.start)*Le+1)):"desc"===ye.fields[we].dir&&(Ae=Math.ceil(Se-(ve-ye.gap.start+1)*Le+1),Se=Math.floor(Se-(ve-ye.gap.start)*Le-1)),we.endsWith("_id"))Me=A(Ae,Se);else if(null===Ie)for(;0===$e||!se(Me,ye.fields[we].rules,be,ye.fields[we].type)&&$e<100;)Me=E(Ae,Se,Ue),$e++;else Me=Ie}if(""===Me&&"float"===ye.fields[we].type){var Je=z(ye.fields[we].entries),Be=C(ye.fields[we].entries),Ye=q(ye.fields[we].entries),He=0,Ze=le(ye.fields[we].rules,be,we),Qe=(Be-Je-1)/(ye.gap.end-ye.gap.start+1);if("asc"===ye.fields[we].dir?(Be=Je+(ve-ye.gap.start+1)*Qe+1,Je=Je+(ve-ye.gap.start)*Qe+1):"desc"===ye.fields[we].dir&&(Je=Be-(ve-ye.gap.start+1)*Qe-1,Be=Be-(ve-ye.gap.start)*Qe-1),null===Ze)for(;0===He||!se(Me,ye.fields[we].rules,be,ye.fields[we].type)&&He<100;)Me=Number(pe.floating({min:Je,max:Be}).toFixed(Ye)),He++;else Me=Ze}if(""===Me&&"char"===ye.fields[we].type&&(Me=ye.fields[we].entries[0]===ye.fields[we].entries[0].toUpperCase()?pe.letter({casing:"upper"}):ye.fields[we].entries[0]===ye.fields[we].entries[0].toLowerCase()?pe.letter({casing:"lower"}):pe.letter()),""===Me&&"date"===ye.fields[we].type){var Ge=Y(Z(ye.fields[we].entries)),Ke=H(Z(ye.fields[we].entries)),Re=0,Ve=le(ye.fields[we].rules,be,we),Xe=ye.gap.end-ye.gap.start+1,et=(Ke.getTime()-Ge.getTime()-1)/Xe;if("asc"===ye.fields[we].dir?(Ke=new Date(Ge.getTime()+(ve-ye.gap.start+1)*et+1),Ge=new Date(Ge.getTime()+(ve-ye.gap.start)*et+1)):"desc"===ye.fields[we].dir&&(Ge=new Date(Ke.getTime()-(ve-ye.gap.start+1)*et-1),Ke=new Date(Ke.getTime()-(ve-ye.gap.start)*et-1)),null===Ve)for(;0===Re||!se(Me,ye.fields[we].rules,be,ye.fields[we].type)&&Re<100;)o=Ge,u=Ke,f=void 0,h=void 0,c=void 0,g=void 0,f=new Date(o.getTime()+Math.random()*(u.getTime()-o.getTime())),h=""+(f.getMonth()+1),c=""+f.getDate(),g=f.getFullYear(),h.length<2&&(h="0"+h),c.length<2&&(c="0"+c),Me=[g,h,c].join("-"),Re++;else Me=Ve}if(""===Me&&"datetime"===ye.fields[we].type){var tt=Y(Z(ye.fields[we].entries)),nt=H(Z(ye.fields[we].entries)),it=0,rt=le(ye.fields[we].rules,be,we),at=ye.gap.end-ye.gap.start+1,st=(nt.getTime()-tt.getTime()-1)/at;if("asc"===ye.fields[we].dir?(nt=new Date(tt.getTime()+(ve-ye.gap.start+1)*st+1),tt=new Date(tt.getTime()+(ve-ye.gap.start)*st+1)):"desc"===ye.fields[we].dir&&(tt=new Date(nt.getTime()-(ve-ye.gap.start+1)*st-1),nt=new Date(nt.getTime()-(ve-ye.gap.start)*st-1)),null===rt)for(;0===it||!se(Me,ye.fields[we].rules,be,ye.fields[we].type)&&it<100;)Me=T(tt,nt),it++;else Me=rt}""===Me&&"time"===ye.fields[we].type&&(a=void 0,s=void 0,l=void 0,a=String(W.hour({twentyfour:!0})),s=String(W.minute()),l=String(W.second()),1===a.length&&(a="0"+a),1===s.length&&(s="0"+s),1===l.length&&(l="0"+l),Me=Math.random()>=.5?[a,s,l].join(":"):[a,s].join(":")),""===Me&&"boolean"===ye.fields[we].type&&(Me=Math.random()>=.5)}if(ye.fields[we].required||Math.random()>=.5)if(we.indexOf(".")>-1){var lt=we.split(".");void 0!==be[lt[0]]&&(be[lt[0]][lt[1]]=Me)}else be[we]=Me}y[ye.key].push(be)}y[ye.key]=y[ye.key].sort(function(e,t){return e.id-t.id})}}for(n in fe(y),fe(y),y)for(r in y[n])for(i in y[n][r])b.indexOf(n+"."+i)>-1&&delete y[n][r][i],void 0!==w[n+"."+i]&&ie(y[n][r],i,w[n+"."+i].split(".")[1]);return m?p(y):y}});
//# sourceMappingURL=blowson.umd.js.map
